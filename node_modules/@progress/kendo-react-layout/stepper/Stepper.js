/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const te=require("react"),l=require("prop-types"),ne=require("./context/StepperContext.js"),d=require("@progress/kendo-react-common"),se=require("./Step.js"),oe=require("@progress/kendo-react-progressbars"),z=require("./contants.js"),re=require("../package-metadata.js"),ie=require("@progress/kendo-react-intl"),D=require("./messages/index.js");function ce(p){const k=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(p){for(const f in p)if(f!=="default"){const I=Object.getOwnPropertyDescriptor(p,f);Object.defineProperty(k,f,I.get?I:{enumerable:!0,get:()=>p[f]})}}return k.default=p,Object.freeze(k)}const o=ce(te),w=o.forwardRef((p,k)=>{d.validatePackage(re.packageMetadata);const{animationDuration:f,children:I,className:P,disabled:g,errorIcon:V,errorSVGIcon:j,item:R,items:b,linear:y,mode:_,orientation:x,selectOnFocus:E,style:T,successIcon:K,successSVGIcon:G,value:u=0,onChange:S,onFocus:C}=p,B=ie.useLocalization().toLanguageString(D.progBarAriaLabel,D.messages[D.progBarAriaLabel]),v=o.useRef(null),A=o.useCallback(()=>{v.current&&d.focusFirstFocusableChild(v.current)},[]),N=o.useCallback(()=>({element:v.current,focus:A}),[A]);o.useImperativeHandle(k,N);const[H,a]=o.useState(u),m=b?b.length:0,n=x==="vertical",O=d.useDir(v,p.dir),U=typeof f=="number"?f:f!==!1?z.DEFAULT_ANIMATION_DURATION:z.NO_ANIMATION;o.useEffect(()=>{a(u)},[u]);const M=o.useCallback((r,i)=>{const e=i===u-1,t=i===u,c=i===u+1;u!==i&&S&&!g&&(!y||e||t||c)&&(d.dispatchEvent(S,r,N(),{value:i}),a(i))},[u,y,S,g,a]),J=o.useCallback(r=>{let i=r.value,e=r.syntheticEvent;M(e,i)},[M]),Q=o.useCallback(r=>{C&&!g&&d.dispatchEvent(C,r.syntheticEvent,N(),void 0)},[C,g]),h=o.useMemo(()=>{const r=O==="rtl",i=b.length-1;return new d.Navigation({root:v,selectors:["ol.k-step-list li.k-step a.k-step-link"],tabIndex:0,keyboardEvents:{keydown:{ArrowLeft:(e,t,c)=>{c.preventDefault();const s=t.elements.indexOf(e);!n&&!r&&s>0?(t.focusPrevious(e),a(s-1)):!n&&r&&s<i&&(t.focusNext(e),a(s+1))},ArrowRight:(e,t,c)=>{c.preventDefault();const s=t.elements.indexOf(e);!n&&!r&&s<i?(t.focusNext(e),a(s+1)):!n&&r&&s>0&&(t.focusPrevious(e),a(s-1))},ArrowUp:(e,t,c)=>{c.preventDefault();const s=t.elements.indexOf(e);n&&!r&&s>0?(t.focusPrevious(e),a(s-1)):n&&r&&s>0&&(t.focusPrevious(e),a(s+1))},ArrowDown:(e,t,c)=>{c.preventDefault();const s=t.elements.indexOf(e);n&&!r&&s<i?(t.focusNext(e),a(s+1)):n&&r&&s<i&&(t.focusNext(e),a(s-1))},Tab:(e,t,c)=>{c.preventDefault();const s=t.elements.indexOf(e),L=t.previous(e).children[0],F=t.next(e).children[0];c.shiftKey?!n&&!r&&s>0?(t.focusPrevious(e),a(s-1),E&&L.click()):!n&&r&&s<i&&(t.focusNext(e),a(s+1),E&&F.click()):!n&&!r&&s<i?(t.focusNext(e),a(s+1),E&&F.click()):!n&&r&&s>0&&(t.focusPrevious(e),a(s-1),E&&L.click())},Home:(e,t,c)=>{c.preventDefault(),t.focusElement(t.first,e),a(0)},End:(e,t,c)=>{c.preventDefault(),t.focusElement(t.last,e),a(i)},Space:(e,t,c)=>{c.preventDefault(),e.children[0].click()},Enter:(e,t,c)=>{c.preventDefault(),e.children[0].click()}}}})},[O,b.length,n,a]);o.useEffect(()=>(h.initializeRovingTab(u),()=>h.removeFocusListener()),[]);const W=o.useCallback(h.triggerKeyboardEvent.bind(h),[]),X=o.useMemo(()=>d.classNames("k-stepper",{"k-stepper-linear":y},P),[y,P]),Y=o.useMemo(()=>({display:"grid",gridTemplateColumns:n?void 0:"repeat("+m*2+", 1fr)",gridTemplateRows:n?"repeat("+m+", 1fr)":void 0,...T}),[n,m,T]),Z=o.useMemo(()=>d.classNames("k-step-list",{"k-step-list-horizontal":!n,"k-step-list-vertical":n}),[n]),$=o.useMemo(()=>({gridColumnStart:n?void 0:1,gridColumnEnd:n?void 0:-1,gridRowStart:n?1:void 0,gridRowEnd:n?-1:void 0}),[n]),ee=o.useMemo(()=>({gridColumnStart:n?void 0:2,gridColumnEnd:n?void 0:m*2,gridRowStart:n?1:void 0,gridRowEnd:n?m:void 0,top:n?17:void 0}),[n,m]),q=b&&b.map((r,i)=>{const e={index:i,disabled:g||r.disabled,focused:i===H,current:i===u,...r},t=R||se.Step;return o.createElement(t,{key:i,...e})});return o.createElement(ne.StepperContext.Provider,{value:{animationDuration:f,isVertical:n,item:R,linear:y,mode:_,numOfSteps:m,value:u,successIcon:K,successSVGIcon:G,errorIcon:V,errorSVGIcon:j,onChange:J,onFocus:Q}},o.createElement("nav",{className:X,style:Y,dir:O,role:"navigation",ref:v,onKeyDown:W},o.createElement("ol",{className:Z,style:$},q||I),o.createElement(oe.ProgressBar,{style:ee,labelPlacement:"start",animation:{duration:U},ariaLabel:B,"aria-hidden":!0,max:m-1,labelVisible:!1,orientation:x,reverse:x==="vertical",value:u,disabled:g,tabIndex:-1})))});w.propTypes={animationDuration:l.oneOfType([l.bool,l.number]),children:l.any,className:l.string,dir:l.string,disabled:l.bool,errorIcon:l.string,errorSVGIcon:d.svgIconPropType,item:l.any,items:l.any,linear:l.bool,mode:l.oneOf(["steps","labels"]),orientation:l.oneOf(["horizontal","vertical"]),style:l.object,successIcon:l.string,successSVGIcon:d.svgIconPropType,value:l.number.isRequired,onChange:l.func,onFocus:l.func};w.displayName="KendoStepper";exports.Stepper=w;
